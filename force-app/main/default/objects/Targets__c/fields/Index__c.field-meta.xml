<?xml version="1.0" encoding="UTF-8"?>
<CustomField xmlns="http://soap.sforce.com/2006/04/metadata">
    <fullName>Index__c</fullName>
    <formula>IF(
  /* 1) guard against missing or zero data */
  OR(
    ISNULL(Target__c),
    Target__c = 0,
    ISNULL(Current__c),
    ISNULL(Working_Days_in_Period__c),
    ISNULL(Working_Days_Elapsed__c)
  ),
  /* show nothing until all pieces exist */
  NULL,

  /* 2) if this is the current month, use working-day pace */
  IF(
    AND(
      Year__c = YEAR(TODAY()),
      Month_Number__c = MONTH(TODAY())
    ),
    /* pace-adjusted index: (actual รท goal) รท (elapsed_workdays รท total_workdays) */
    ( Current__c / Target__c ) 
    /
    ( Working_Days_Elapsed__c / Working_Days_in_Period__c ),

    /* 3) otherwise (past or future month) just show plain progress */
    Current__c / Target__c
  )
)</formula>
    <formulaTreatBlanksAs>BlankAsZero</formulaTreatBlanksAs>
    <label>Index</label>
    <precision>18</precision>
    <required>false</required>
    <scale>0</scale>
    <trackHistory>false</trackHistory>
    <trackTrending>false</trackTrending>
    <type>Percent</type>
</CustomField>
