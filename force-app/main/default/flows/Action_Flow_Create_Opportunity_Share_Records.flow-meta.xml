<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <apiVersion>62.0</apiVersion>
    <areMetricsLoggedToDataCloud>false</areMetricsLoggedToDataCloud>
    <assignments>
        <name>Add_Opportunities_from_Lead_Source_to_Collection</name>
        <label>Add Opportunities from Lead Source to Collection</label>
        <locationX>1436</locationX>
        <locationY>2246</locationY>
        <assignmentItems>
            <assignToReference>OppCollection</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>Get_Opportunities_from_Lead_Source</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Check_for_Single_Opportunity</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Add_Opportunities_from_Name_to_Collection</name>
        <label>Add Opportunities from Name to Collection</label>
        <locationX>1436</locationX>
        <locationY>566</locationY>
        <assignmentItems>
            <assignToReference>OppCollection</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>Get_Opportunities_from_Name</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Check_for_Input_Record_Type_ID</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Add_Opportunities_from_Owner_ID_to_Collection</name>
        <label>Add Opportunities from Owner ID to Collection</label>
        <locationX>1436</locationX>
        <locationY>1730</locationY>
        <assignmentItems>
            <assignToReference>OppCollection</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>Get_Opportunities_from_Owner_ID</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Check_for_Lead_Source</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Add_Opportunities_from_Record_Type_ID_to_Collection</name>
        <label>Add Opportunities from Record Type ID to Collection</label>
        <locationX>1436</locationX>
        <locationY>1214</locationY>
        <assignmentItems>
            <assignToReference>OppCollection</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>Get_Opportunities_from_Record_Type_ID</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Check_for_Owner_ID</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Add_OppShare_to_Collection</name>
        <label>Add OppShare to Collection</label>
        <locationX>1062</locationX>
        <locationY>4202</locationY>
        <assignmentItems>
            <assignToReference>OppShareCollection</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>OppShare</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Loop_Opportunities</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Edit_Access</name>
        <label>Assign Edit Access</label>
        <locationX>710</locationX>
        <locationY>3170</locationY>
        <assignmentItems>
            <assignToReference>RecordAccess</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Edit</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Share_With_User_or_Group</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Fault_Message_to_Custom_Error</name>
        <label>Assign Fault Message to Custom Error</label>
        <locationX>1700</locationX>
        <locationY>458</locationY>
        <assignmentItems>
            <assignToReference>CustomError</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Flow.FaultMessage</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Send_Error_Email_from_Input_Values</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Invalid_Access_Type_to_Custom_Error</name>
        <label>Assign Invalid Access Type to Custom Error</label>
        <locationX>1238</locationX>
        <locationY>3170</locationY>
        <assignmentItems>
            <assignToReference>CustomError</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Invalid Access Type: &quot;{!inputAccessLevel}&quot;. Only &quot;Edit&quot; and &quot;Read&quot; are accepted values.</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <isGoTo>true</isGoTo>
            <targetReference>Send_Error_Email_from_Input_Values</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Invalid_ShareWith_Value_to_Custom_Error</name>
        <label>Assign Invalid ShareWith Value to Custom Error</label>
        <locationX>1634</locationX>
        <locationY>3536</locationY>
        <assignmentItems>
            <assignToReference>CustomError</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Invalid ShareWith Value &quot;{!inputShareWith}&quot;. Valid Inputs are &quot;User&quot; and &quot;Group&quot;</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <isGoTo>true</isGoTo>
            <targetReference>Send_Error_Email_from_Input_Values</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Missing_Input_Group_Developer_Name</name>
        <label>Assign Missing Input Group Developer Name</label>
        <locationX>1370</locationX>
        <locationY>3644</locationY>
        <assignmentItems>
            <assignToReference>CustomError</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>When selecting Group in ShareWith, you must also provide a Group Developer Name</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <isGoTo>true</isGoTo>
            <targetReference>Send_Error_Email_from_Input_Values</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Missing_Input_User_ID_to_Custom_Error</name>
        <label>Assign Missing Input User ID to Custom Error</label>
        <locationX>578</locationX>
        <locationY>3644</locationY>
        <assignmentItems>
            <assignToReference>CustomError</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>When selecting User in ShareWith, you must also provide a User ID</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <isGoTo>true</isGoTo>
            <targetReference>Send_Error_Email_from_Input_Values</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_No_Inputs_to_Custom_Error</name>
        <label>Assign No Inputs to Custom Error</label>
        <locationX>2162</locationX>
        <locationY>3062</locationY>
        <assignmentItems>
            <assignToReference>CustomError</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Did Not Receive Any Inputs</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <isGoTo>true</isGoTo>
            <targetReference>Send_Error_Email_from_Input_Values</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_OppShare_to_Output_Variable</name>
        <label>Assign OppShare to Output Variable</label>
        <locationX>974</locationX>
        <locationY>4502</locationY>
        <assignmentItems>
            <assignToReference>outputOppShareCollection</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>OppShareCollection</elementReference>
            </value>
        </assignmentItems>
    </assignments>
    <assignments>
        <name>Assign_Read_Access</name>
        <label>Assign Read Access</label>
        <locationX>974</locationX>
        <locationY>3170</locationY>
        <assignmentItems>
            <assignToReference>RecordAccess</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Read</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Share_With_User_or_Group</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Too_Many_Inputs_to_Custom_Error</name>
        <label>Assign Too Many Inputs to Custom Error</label>
        <locationX>2426</locationX>
        <locationY>3062</locationY>
        <assignmentItems>
            <assignToReference>CustomError</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Too many inputs values. Please populate only a single input value.</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <isGoTo>true</isGoTo>
            <targetReference>Send_Error_Email_from_Input_Values</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assignment_17</name>
        <label>Add Single Opportunity to Collection</label>
        <locationX>1436</locationX>
        <locationY>2762</locationY>
        <assignmentItems>
            <assignToReference>OppCollection</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>Get_Opportunity_Single</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Do_We_Have_a_Single_Input</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Copy_3_of_Increment_Counter_by_1_from_Lead_Source</name>
        <label>Increment Counter by 1 from Lead Source</label>
        <locationX>1436</locationX>
        <locationY>2138</locationY>
        <assignmentItems>
            <assignToReference>InputCounter</assignToReference>
            <operator>Add</operator>
            <value>
                <numberValue>1.0</numberValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Add_Opportunities_from_Lead_Source_to_Collection</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Increment_Counter_by_1_from_Name</name>
        <label>Increment Counter by 1 from Name</label>
        <locationX>1436</locationX>
        <locationY>458</locationY>
        <assignmentItems>
            <assignToReference>InputCounter</assignToReference>
            <operator>Add</operator>
            <value>
                <numberValue>1.0</numberValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Add_Opportunities_from_Name_to_Collection</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Increment_Counter_by_1_from_Owner_ID</name>
        <label>Increment Counter by 1 from Owner ID</label>
        <locationX>1436</locationX>
        <locationY>1622</locationY>
        <assignmentItems>
            <assignToReference>InputCounter</assignToReference>
            <operator>Add</operator>
            <value>
                <numberValue>1.0</numberValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Add_Opportunities_from_Owner_ID_to_Collection</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Increment_Counter_by_1_from_Record_Type_ID</name>
        <label>Increment Counter by 1 from Record Type ID</label>
        <locationX>1436</locationX>
        <locationY>1106</locationY>
        <assignmentItems>
            <assignToReference>InputCounter</assignToReference>
            <operator>Add</operator>
            <value>
                <numberValue>1.0</numberValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Add_Opportunities_from_Record_Type_ID_to_Collection</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Increment_Counter_by_1_from_Single_Opportunity</name>
        <label>Increment Counter by 1 from Single Opportunity</label>
        <locationX>1436</locationX>
        <locationY>2654</locationY>
        <assignmentItems>
            <assignToReference>InputCounter</assignToReference>
            <operator>Add</operator>
            <value>
                <numberValue>1.0</numberValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Assignment_17</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Invalid_Object_Selection</name>
        <label>Invalid Object Selection</label>
        <locationX>2459</locationX>
        <locationY>4886</locationY>
        <assignmentItems>
            <assignToReference>CustomError</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>The flow currently only supports sharing Opportunities</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <isGoTo>true</isGoTo>
            <targetReference>Send_Error_Email_from_Input_Values</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Popuate_OppShare</name>
        <label>Popuate OppShare</label>
        <locationX>1062</locationX>
        <locationY>4094</locationY>
        <assignmentItems>
            <assignToReference>OppShare.OpportunityId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Loop_Opportunities.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>OppShare.RowCause</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Manual</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>OppShare.OpportunityAccessLevel</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>RecordAccess</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>OppShare.UserOrGroupId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>UserGroupId</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Add_OppShare_to_Collection</targetReference>
        </connector>
    </assignments>
    <decisions>
        <name>Check_for_Input_Name</name>
        <label>Check for Input Name</label>
        <locationX>1700</locationX>
        <locationY>242</locationY>
        <defaultConnector>
            <targetReference>Check_for_Input_Record_Type_ID</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Got_Input_Name</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>searchName</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_Opportunities_from_Name</targetReference>
            </connector>
            <label>Got Input Name</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_for_Input_Record_Type_ID</name>
        <label>Check for Input Record Type ID</label>
        <locationX>1700</locationX>
        <locationY>890</locationY>
        <defaultConnector>
            <targetReference>Check_for_Owner_ID</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Get_Record_Type_ID</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>searchRecordTypeId</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_Opportunities_from_Record_Type_ID</targetReference>
            </connector>
            <label>Get Record Type ID</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_for_Lead_Source</name>
        <label>Check for Lead Source</label>
        <locationX>1700</locationX>
        <locationY>1922</locationY>
        <defaultConnector>
            <targetReference>Check_for_Single_Opportunity</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Got_Lead_Source</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>searchLeadSource</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_Opportunities_from_Lead_Source</targetReference>
            </connector>
            <label>Got Lead Source</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_for_Owner_ID</name>
        <label>Check for Owner ID</label>
        <locationX>1700</locationX>
        <locationY>1406</locationY>
        <defaultConnector>
            <targetReference>Check_for_Lead_Source</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Got_Owner_ID</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>searchOwnerId</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_Opportunities_from_Owner_ID</targetReference>
            </connector>
            <label>Got Owner ID</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_for_Single_Opportunity</name>
        <label>Check for Single Opportunity</label>
        <locationX>1700</locationX>
        <locationY>2438</locationY>
        <defaultConnector>
            <targetReference>Do_We_Have_a_Single_Input</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Single_Opportunity_Exists</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>searchOpportunityId</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_Opportunity_Single</targetReference>
            </connector>
            <label>Single Opportunity Exists</label>
        </rules>
    </decisions>
    <decisions>
        <name>Do_We_Have_a_Single_Input</name>
        <label>Do We Have a Single Input?</label>
        <locationX>1700</locationX>
        <locationY>2954</locationY>
        <defaultConnector>
            <targetReference>Assign_Too_Many_Inputs_to_Custom_Error</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Too Many Inputs</defaultConnectorLabel>
        <rules>
            <name>Single_Input_Received</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>InputCounter</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <numberValue>1.0</numberValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Which_Access_Level_Did_We_Get</targetReference>
            </connector>
            <label>Single Input Received</label>
        </rules>
        <rules>
            <name>No_Inputs_Received</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>InputCounter</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <numberValue>0.0</numberValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_No_Inputs_to_Custom_Error</targetReference>
            </connector>
            <label>No Inputs Received</label>
        </rules>
    </decisions>
    <decisions>
        <name>Do_We_Have_an_Input_Group_Developer_Name</name>
        <label>Do We Have an Input Group Developer Name?</label>
        <locationX>1106</locationX>
        <locationY>3536</locationY>
        <defaultConnector>
            <targetReference>Assign_Missing_Input_Group_Developer_Name</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Missing Group Developer Name</defaultConnectorLabel>
        <rules>
            <name>Input_Group_Developer_Name_Exists</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>inputGroupDeveloperName</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_Group</targetReference>
            </connector>
            <label>Input Group Developer Name Exists</label>
        </rules>
    </decisions>
    <decisions>
        <name>Do_We_Have_an_Input_User_ID</name>
        <label>Do We Have an Input User ID?</label>
        <locationX>314</locationX>
        <locationY>3536</locationY>
        <defaultConnector>
            <targetReference>Assign_Missing_Input_User_ID_to_Custom_Error</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Missing User ID</defaultConnectorLabel>
        <rules>
            <name>Input_User_ID_Exists</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>inputUserId</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_User</targetReference>
            </connector>
            <label>Input User ID Exists</label>
        </rules>
    </decisions>
    <decisions>
        <name>Share_With_User_or_Group</name>
        <label>Share With User or Group?</label>
        <locationX>974</locationX>
        <locationY>3428</locationY>
        <defaultConnector>
            <targetReference>Assign_Invalid_ShareWith_Value_to_Custom_Error</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Share_With_User</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>inputShareWith</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>User</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Do_We_Have_an_Input_User_ID</targetReference>
            </connector>
            <label>Share With User</label>
        </rules>
        <rules>
            <name>Share_With_Group</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>inputShareWith</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Group</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Do_We_Have_an_Input_Group_Developer_Name</targetReference>
            </connector>
            <label>Share With Group</label>
        </rules>
    </decisions>
    <decisions>
        <name>Which_Access_Level_Did_We_Get</name>
        <label>Which Access Level Did We Get?</label>
        <locationX>974</locationX>
        <locationY>3062</locationY>
        <defaultConnector>
            <targetReference>Assign_Invalid_Access_Type_to_Custom_Error</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Invalid Access Type</defaultConnectorLabel>
        <rules>
            <name>Edit</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>inputAccessLevel</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Edit</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_Edit_Access</targetReference>
            </connector>
            <label>Edit</label>
        </rules>
        <rules>
            <name>Read</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>inputAccessLevel</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Read</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_Read_Access</targetReference>
            </connector>
            <label>Read</label>
        </rules>
    </decisions>
    <decisions>
        <name>Which_Object_is_Being_Shared</name>
        <label>Which Object is Being Shared?</label>
        <locationX>2459</locationX>
        <locationY>134</locationY>
        <defaultConnector>
            <targetReference>Invalid_Object_Selection</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Opportunity</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>inputObject</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Opportunity</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Check_for_Input_Name</targetReference>
            </connector>
            <label>Opportunity</label>
        </rules>
        <rules>
            <name>Lead</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>inputObject</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Lead</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Invalid_Object_Selection</targetReference>
            </connector>
            <label>Lead</label>
        </rules>
        <rules>
            <name>Account</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>inputObject</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Account</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Invalid_Object_Selection</targetReference>
            </connector>
            <label>Account</label>
        </rules>
        <rules>
            <name>Journal</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>inputObject</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Journal</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Invalid_Object_Selection</targetReference>
            </connector>
            <label>Journal</label>
        </rules>
    </decisions>
    <environments>Default</environments>
    <interviewLabel>Action Flow: Create Opportunity Share Records {!$Flow.CurrentDateTime}</interviewLabel>
    <label>Action Flow: Create Opportunity Share Records</label>
    <loops>
        <name>Loop_Opportunities</name>
        <label>Loop Opportunities</label>
        <locationX>974</locationX>
        <locationY>3986</locationY>
        <collectionReference>OppCollection</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Popuate_OppShare</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Create_OppShare_Records</targetReference>
        </noMoreValuesConnector>
    </loops>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>AUTO_LAYOUT_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>AutoLaunchedFlow</processType>
    <recordCreates>
        <name>Create_OppShare_Records</name>
        <label>Create OppShare Records</label>
        <locationX>974</locationX>
        <locationY>4394</locationY>
        <connector>
            <targetReference>Assign_OppShare_to_Output_Variable</targetReference>
        </connector>
        <doesUpsert>true</doesUpsert>
        <doesUpsertAllOrNone>true</doesUpsertAllOrNone>
        <faultConnector>
            <isGoTo>true</isGoTo>
            <targetReference>Assign_Fault_Message_to_Custom_Error</targetReference>
        </faultConnector>
        <inputReference>OppShareCollection</inputReference>
    </recordCreates>
    <recordLookups>
        <name>Get_Group</name>
        <label>Get Group</label>
        <locationX>842</locationX>
        <locationY>3644</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Loop_Opportunities</targetReference>
        </connector>
        <faultConnector>
            <isGoTo>true</isGoTo>
            <targetReference>Assign_Fault_Message_to_Custom_Error</targetReference>
        </faultConnector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>DeveloperName</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>inputGroupDeveloperName</elementReference>
            </value>
        </filters>
        <object>Group</object>
        <outputAssignments>
            <assignToReference>UserGroupId</assignToReference>
            <field>Id</field>
        </outputAssignments>
    </recordLookups>
    <recordLookups>
        <name>Get_Opportunities_from_Lead_Source</name>
        <label>Get Opportunities from Lead Source</label>
        <locationX>1436</locationX>
        <locationY>2030</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Copy_3_of_Increment_Counter_by_1_from_Lead_Source</targetReference>
        </connector>
        <faultConnector>
            <isGoTo>true</isGoTo>
            <targetReference>Assign_Fault_Message_to_Custom_Error</targetReference>
        </faultConnector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>LeadSource</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>searchLeadSource</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>false</getFirstRecordOnly>
        <object>Opportunity</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Opportunities_from_Name</name>
        <label>Get Opportunities from Name</label>
        <locationX>1436</locationX>
        <locationY>350</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Increment_Counter_by_1_from_Name</targetReference>
        </connector>
        <faultConnector>
            <targetReference>Assign_Fault_Message_to_Custom_Error</targetReference>
        </faultConnector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Name</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>searchName</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>false</getFirstRecordOnly>
        <object>Opportunity</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Opportunities_from_Owner_ID</name>
        <label>Get Opportunities from Owner ID</label>
        <locationX>1436</locationX>
        <locationY>1514</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Increment_Counter_by_1_from_Owner_ID</targetReference>
        </connector>
        <faultConnector>
            <isGoTo>true</isGoTo>
            <targetReference>Assign_Fault_Message_to_Custom_Error</targetReference>
        </faultConnector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>OwnerId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>searchOwnerId</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>false</getFirstRecordOnly>
        <object>Opportunity</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Opportunities_from_Record_Type_ID</name>
        <label>Get Opportunities from Record Type ID</label>
        <locationX>1436</locationX>
        <locationY>998</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Increment_Counter_by_1_from_Record_Type_ID</targetReference>
        </connector>
        <faultConnector>
            <isGoTo>true</isGoTo>
            <targetReference>Assign_Fault_Message_to_Custom_Error</targetReference>
        </faultConnector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>RecordTypeId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>searchRecordTypeId</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>false</getFirstRecordOnly>
        <object>Opportunity</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Opportunity_Single</name>
        <label>Get Opportunity (Single)</label>
        <locationX>1436</locationX>
        <locationY>2546</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Increment_Counter_by_1_from_Single_Opportunity</targetReference>
        </connector>
        <faultConnector>
            <isGoTo>true</isGoTo>
            <targetReference>Assign_Fault_Message_to_Custom_Error</targetReference>
        </faultConnector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>searchOpportunityId</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Opportunity</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_User</name>
        <label>Get User</label>
        <locationX>50</locationX>
        <locationY>3644</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Loop_Opportunities</targetReference>
        </connector>
        <faultConnector>
            <isGoTo>true</isGoTo>
            <targetReference>Assign_Fault_Message_to_Custom_Error</targetReference>
        </faultConnector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>inputUserId</elementReference>
            </value>
        </filters>
        <object>User</object>
        <outputAssignments>
            <assignToReference>UserGroupId</assignToReference>
            <field>Id</field>
        </outputAssignments>
    </recordLookups>
    <start>
        <locationX>2333</locationX>
        <locationY>0</locationY>
        <connector>
            <targetReference>Which_Object_is_Being_Shared</targetReference>
        </connector>
    </start>
    <status>Active</status>
    <subflows>
        <name>Send_Error_Email_from_Input_Values</name>
        <label>Send Error Email from Input Values</label>
        <locationX>1700</locationX>
        <locationY>566</locationY>
        <flowName>AL_Send_Error_Email_from_Input_Values</flowName>
        <inputAssignments>
            <name>inputCustomError</name>
            <value>
                <elementReference>CustomError</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>inputFlowName</name>
            <value>
                <stringValue>Action Flow: Create Opportunity Share Records</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>inputRecordId</name>
            <value>
                <elementReference>searchOpportunityId</elementReference>
            </value>
        </inputAssignments>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </subflows>
    <variables>
        <name>CustomError</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <description>Accepts &quot;Read&quot; or &quot;Edit&quot; and defines if the person/group can edit or just view the record</description>
        <name>inputAccessLevel</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>InputCounter</name>
        <dataType>Number</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <scale>0</scale>
        <value>
            <numberValue>0.0</numberValue>
        </value>
    </variables>
    <variables>
        <description>Must be the developer name of the group, e.g. &quot;Danish_Meeting_Booker&quot;</description>
        <name>inputGroupDeveloperName</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>inputObject</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <description>Accepts &quot;User&quot; or Group&quot;</description>
        <name>inputShareWith</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>inputUserId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>OppCollection</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Opportunity</objectType>
    </variables>
    <variables>
        <name>OppShare</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>OpportunityShare</objectType>
    </variables>
    <variables>
        <name>OppShareCollection</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>OpportunityShare</objectType>
    </variables>
    <variables>
        <name>outputOppShareCollection</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>true</isOutput>
        <objectType>OpportunityShare</objectType>
    </variables>
    <variables>
        <name>RecordAccess</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>searchLeadSource</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>searchName</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>searchOpportunityId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>searchOwnerId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>searchRecordTypeId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>UserGroupId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
</Flow>
