<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <apiVersion>62.0</apiVersion>
    <areMetricsLoggedToDataCloud>false</areMetricsLoggedToDataCloud>
    <assignments>
        <name>Populate_Invalid_Values</name>
        <label>Populate Invalid Values</label>
        <locationX>578</locationX>
        <locationY>734</locationY>
        <assignmentItems>
            <assignToReference>outputSurveyResult</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Error</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>outputDanishSms</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>ptDanishInvalidResponseMessage</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>outputSwedishSms</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>ptSwedishInvalidResponseMessage</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>outputIsResponseValid</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>outputIrishSms</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>ptIrishInvalidResponseMessage</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Set_IsSuccess_to_True</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Populate_Satisfied_Values</name>
        <label>Populate Satisfied Values</label>
        <locationX>50</locationX>
        <locationY>734</locationY>
        <assignmentItems>
            <assignToReference>outputSurveyResult</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Satisfied</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>outputSwedishSms</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>ptSwedishSatisfiedMessage</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>outputDanishSms</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>ptDanishSatisfiedMessage</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>outputIsResponseValid</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>outputIrishSms</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>ptIrishSatisfiedMessage</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Set_IsSuccess_to_True</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Populate_Unsatisfied_Values</name>
        <label>Populate Unsatisfied Values</label>
        <locationX>314</locationX>
        <locationY>734</locationY>
        <assignmentItems>
            <assignToReference>outputSurveyResult</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Unsatisfied</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>outputDanishSms</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>ptDanishUnsatisfiedMessage</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>outputSwedishSms</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>ptSwedishUnsatisfiedMessage</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>outputIsResponseValid</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>outputIrishSms</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>ptIrishUnsatisfiedMessage</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Set_IsSuccess_to_True</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_IsSatisfied_to_True</name>
        <label>Set IsSatisfied to True</label>
        <locationX>402</locationX>
        <locationY>350</locationY>
        <assignmentItems>
            <assignToReference>IsSatisfied</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Loop_Keywords</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_IsSuccess_to_True</name>
        <label>Set IsSuccess to True</label>
        <locationX>314</locationX>
        <locationY>926</locationY>
        <assignmentItems>
            <assignToReference>IsSuccess</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
    </assignments>
    <assignments>
        <name>Set_IsUnsatisfied_to_True</name>
        <label>Set IsUnsatisfied to True</label>
        <locationX>666</locationX>
        <locationY>350</locationY>
        <assignmentItems>
            <assignToReference>IsUnsatisfied</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Loop_Keywords</targetReference>
        </connector>
    </assignments>
    <decisions>
        <name>What_is_the_matched_keyword</name>
        <label>What is the matched keyword?</label>
        <locationX>666</locationX>
        <locationY>242</locationY>
        <defaultConnector>
            <targetReference>Loop_Keywords</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Keyword_is_ja</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Loop_Keywords</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>ja</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Set_IsSatisfied_to_True</targetReference>
            </connector>
            <label>Keyword is &quot;ja&quot;</label>
        </rules>
        <rules>
            <name>Keyword_is_nej</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Loop_Keywords</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>nej</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Set_IsUnsatisfied_to_True</targetReference>
            </connector>
            <label>Keyword is &quot;nej&quot;</label>
        </rules>
    </decisions>
    <decisions>
        <name>What_was_the_result</name>
        <label>What was the result?</label>
        <locationX>314</locationX>
        <locationY>626</locationY>
        <defaultConnector>
            <targetReference>Populate_Invalid_Values</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Invalid Response</defaultConnectorLabel>
        <rules>
            <name>Customer_is_Satisfied</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>IsSatisfied</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>IsUnsatisfied</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Populate_Satisfied_Values</targetReference>
            </connector>
            <label>Customer is Satisfied</label>
        </rules>
        <rules>
            <name>Customer_is_Unsatisfied</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>IsUnsatisfied</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>IsSatisfied</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Populate_Unsatisfied_Values</targetReference>
            </connector>
            <label>Customer is Unsatisfied</label>
        </rules>
    </decisions>
    <environments>Default</environments>
    <interviewLabel>AL - {!$Flow.CurrentDateTime}</interviewLabel>
    <label>AL - Parse SMS Survey Response</label>
    <loops>
        <name>Loop_Keywords</name>
        <label>Loop Keywords</label>
        <locationX>314</locationX>
        <locationY>134</locationY>
        <collectionReference>inputMatchedKeywordCollection</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>What_is_the_matched_keyword</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>What_was_the_result</targetReference>
        </noMoreValuesConnector>
    </loops>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>AUTO_LAYOUT_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>AutoLaunchedFlow</processType>
    <start>
        <locationX>188</locationX>
        <locationY>0</locationY>
        <connector>
            <targetReference>Loop_Keywords</targetReference>
        </connector>
    </start>
    <status>Draft</status>
    <textTemplates>
        <name>ptDanishInvalidResponseMessage</name>
        <isViewedAsPlainText>true</isViewedAsPlainText>
        <text>Kære {!inputFirstName},

Tusind tak for din besvarelse.

Vi har dog ikke helt kunnet tolke dit svar - Vores system regnede med at modtage et &quot;ja&quot; eller &quot;nej&quot; på vores tilfredshedsundersøgelse og kunne ikke med sikkerhed regne ud om du var tilfreds eller utilfreds.
Systemet forstår kun 

&quot;JA&quot; 
og 
&quot;NEJ&quot;

Vi vil stadig rigtig gerne høre fra dig - besvar meget gerne denne sms med enten &quot;JA&quot;, hvis du er tilfreds eller &quot;NEJ&quot;, hvis du ikke er tilfreds. 

Med venlig hilsen,
Din Familiejurist</text>
    </textTemplates>
    <textTemplates>
        <name>ptDanishSatisfiedMessage</name>
        <isViewedAsPlainText>true</isViewedAsPlainText>
        <text>Kære {!inputFirstName},

Det glæder os meget at du er tilfreds! 
Hvis du har tid og lyst, ville vi blive så glade, hvis du vil give os en anmeldelse på Trustpilot. 

Du modtager inden længe en mail med en invitation til Trustpilot på emailen {!inputEmail}.

Såfremt du lægger en anmeldelse, fordobler du din chance for at vinde gavekortet på 1.000 kr.!

Hav en fortsat god dag.
Med venlig hilsen,
Din Familiejurist</text>
    </textTemplates>
    <textTemplates>
        <name>ptDanishUnsatisfiedMessage</name>
        <isViewedAsPlainText>true</isViewedAsPlainText>
        <text>Kære {!inputFirstName},

Vi er kede af at høre at du ikke har været tilfreds med din oplevelse. 
Hvis du er interesseret, og ikke allerede har været i dialog med os omkring det, vil vi rigtig gerne høre nærmere omkring hvad du mener kunne have været bedre.

Vi forsøger altid at forbedre os og ved godt at vi ikke rammer rigtigt hver gang - men med din feedback, håber vi at kunne forbedre os.

Du er meget velkommen til at skrive til os på feedback@dinfamiliejurist.dk og fortælle om din oplevelse - og hvis der er noget du mener vi stadig kan nå at gøre, for at løse situationen.

Hav en god dag.

Med venlig hilsen,
Din Familiejurist</text>
    </textTemplates>
    <textTemplates>
        <name>ptIrishInvalidResponseMessage</name>
        <isViewedAsPlainText>true</isViewedAsPlainText>
        <text>Dear {!inputFirstName},

Thank you very much for your response.

However, we weren’t fully able to interpret your answer – our system expected to receive a &quot;yes&quot; or &quot;no&quot; in our satisfaction survey and could not determine with certainty whether you were satisfied or dissatisfied.
The system only understands:

&quot;YES&quot;
and
&quot;NO&quot;

We would still very much like to hear from you – please reply to this SMS with either &quot;YES&quot; if you are satisfied or &quot;NO&quot; if you are not satisfied.

Kind regards,
Heres Law</text>
    </textTemplates>
    <textTemplates>
        <name>ptIrishSatisfiedMessage</name>
        <isViewedAsPlainText>true</isViewedAsPlainText>
        <text>Dear {!inputFirstName},

We are very pleased that you are satisfied!
If you have the time and desire, we would be so happy if you would give us a review on Trustpilot.

You will soon receive an email with an invitation to Trustpilot at {!inputEmail}.

If you leave a review, you double your chance of winning the 1,000 DKK gift card!

Have a wonderful day.
Kind regards,
Heres Law</text>
    </textTemplates>
    <textTemplates>
        <name>ptIrishUnsatisfiedMessage</name>
        <isViewedAsPlainText>true</isViewedAsPlainText>
        <text>Dear {!inputFirstName},

We are sorry to hear that you have not been satisfied with your experience.
If you are interested, and have not already been in dialogue with us about it, we would very much like to hear more about what you think could have been better.

We always strive to improve and know that we don’t get it right every time – but with your feedback, we hope to do better.

You are very welcome to write to us at support@hereslaw.ie
 and tell us about your experience – and if there is something you believe we can still do to resolve the situation.

Have a good day.

Kind regards,
Heres Law</text>
    </textTemplates>
    <textTemplates>
        <name>ptSwedishInvalidResponseMessage</name>
        <isViewedAsPlainText>true</isViewedAsPlainText>
        <text>Hej {!inputFirstName},

Tusen tack för ditt svar.

Vi har dock inte riktigt kunnat tolka ditt svar - vårt system förväntade sig att få ett &quot;ja&quot; eller &quot;nej&quot; på vår kundnöjdhetsundersökning och kunde inte med säkerhet avgöra om du var nöjd eller missnöjd.
Systemet förstår endast

&quot;JA&quot;
och
&quot;NEJ&quot;

Vi vill fortfarande väldigt gärna höra från dig - svara gärna på detta sms med antingen &quot;JA&quot;, om du är nöjd eller &quot;NEJ&quot;, om du inte är nöjd.

Med vänliga hälsningar,
Din Familjejurist</text>
    </textTemplates>
    <textTemplates>
        <name>ptSwedishSatisfiedMessage</name>
        <isViewedAsPlainText>true</isViewedAsPlainText>
        <text>Hej {!inputFirstName},

Vi är mycket glada över att du är nöjd!
Om du har tid och lust, skulle vi bli så glada om du vill ge oss en recension på Trustpilot.

Du kommer inom kort att få ett mail med en inbjudan till Trustpilot till e-postadressen {!inputEmail}.

Om du lägger upp en recension, dubblar du din chans att vinna presentkortet på 1.500 kr.!

Ha en fortsatt bra dag.
Med vänliga hälsningar,
Din Familjejurist</text>
    </textTemplates>
    <textTemplates>
        <name>ptSwedishUnsatisfiedMessage</name>
        <isViewedAsPlainText>true</isViewedAsPlainText>
        <text>Hej {!inputFirstName},

Vi är ledsna att höra att du inte har varit nöjd med din upplevelse.
Om du är intresserad, och inte redan har varit i dialog med oss om det, skulle vi verkligen uppskatta att höra mer om vad du tycker kunde ha varit bättre.

Vi försöker alltid förbättra oss och vet att vi inte alltid träffar rätt - men med din feedback hoppas vi kunna bli bättre.

Du är mycket välkommen att skriva till oss på feedback@dinfamiliejurist.dk och berätta om din upplevelse - och om det är något du anser att vi fortfarande kan göra för att lösa situationen.

Ha en bra dag.

Med vänliga hälsningar,
Din Familjejurist</text>
    </textTemplates>
    <variables>
        <name>inputEmail</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>inputFirstName</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>inputLastName</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>inputMatchedKeywordCollection</name>
        <dataType>String</dataType>
        <isCollection>true</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>IsSatisfied</name>
        <dataType>Boolean</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <booleanValue>false</booleanValue>
        </value>
    </variables>
    <variables>
        <name>IsSuccess</name>
        <dataType>Boolean</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>true</isOutput>
        <value>
            <booleanValue>false</booleanValue>
        </value>
    </variables>
    <variables>
        <name>IsUnsatisfied</name>
        <dataType>Boolean</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <booleanValue>false</booleanValue>
        </value>
    </variables>
    <variables>
        <name>outputDanishSms</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>outputIrishSms</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>outputIsResponseValid</name>
        <dataType>Boolean</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>true</isOutput>
        <value>
            <booleanValue>false</booleanValue>
        </value>
    </variables>
    <variables>
        <name>outputSurveyResult</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>outputSwedishSms</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>true</isOutput>
    </variables>
</Flow>
