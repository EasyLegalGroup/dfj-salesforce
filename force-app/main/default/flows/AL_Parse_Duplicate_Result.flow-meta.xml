<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <actionCalls>
        <name>Email_IT_About_Multiple_Duplicate_Accounts_on_Lead_Import</name>
        <label>Email IT About Multiple Duplicate Accounts on Lead Import</label>
        <locationX>50</locationX>
        <locationY>2372</locationY>
        <actionName>emailSimple</actionName>
        <actionType>emailSimple</actionType>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>emailAddresses</name>
            <value>
                <stringValue>teknik@dinfamiliejurist.dk</stringValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>senderType</name>
            <value>
                <stringValue>OrgWideEmailAddress</stringValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>senderAddress</name>
            <value>
                <stringValue>no-reply@dinfamiliejurist.dk</stringValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>emailSubject</name>
            <value>
                <stringValue>Multiple Converted Duplicates Identified</stringValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>emailBody</name>
            <value>
                <elementReference>rtEmailMultipleDuplicateAccounts</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>sendRichBody</name>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </inputParameters>
        <nameSegment>emailSimple</nameSegment>
        <offset>0</offset>
    </actionCalls>
    <actionCalls>
        <name>Get_Lead_Duplicate_ID_s</name>
        <label>Get Lead Duplicate ID&apos;s</label>
        <locationX>578</locationX>
        <locationY>1190</locationY>
        <actionName>dupcheck__dc3GetDuplicateIdsFromDcOutputFlowAction</actionName>
        <actionType>apex</actionType>
        <connector>
            <targetReference>Loop_Lead_ID_s</targetReference>
        </connector>
        <faultConnector>
            <isGoTo>true</isGoTo>
            <targetReference>Populate_Custom_Error_with_Flow_Fault_Message</targetReference>
        </faultConnector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>duplicateResult</name>
            <value>
                <elementReference>PersonAccount_Duplicate_Check.duplicateResult</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>objectPrefix</name>
            <value>
                <stringValue>00Q</stringValue>
            </value>
        </inputParameters>
        <nameSegment>dupcheck__dc3GetDuplicateIdsFromDcOutputFlowAction</nameSegment>
        <offset>0</offset>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </actionCalls>
    <actionCalls>
        <name>Get_PersonAccount_Duplicate_ID_s</name>
        <label>Get PersonAccount Duplicate ID&apos;s</label>
        <locationX>446</locationX>
        <locationY>566</locationY>
        <actionName>dupcheck__dc3GetDuplicateIdsFromDcOutputFlowAction</actionName>
        <actionType>apex</actionType>
        <connector>
            <targetReference>Loop_PersonAccount_IDs</targetReference>
        </connector>
        <faultConnector>
            <isGoTo>true</isGoTo>
            <targetReference>Populate_Custom_Error_with_Flow_Fault_Message</targetReference>
        </faultConnector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>duplicateResult</name>
            <value>
                <elementReference>PersonAccount_Duplicate_Check.duplicateResult</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>objectPrefix</name>
            <value>
                <stringValue>001P</stringValue>
            </value>
        </inputParameters>
        <nameSegment>dupcheck__dc3GetDuplicateIdsFromDcOutputFlowAction</nameSegment>
        <offset>0</offset>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </actionCalls>
    <actionCalls>
        <name>Merge_Leads</name>
        <label>Merge Leads</label>
        <locationX>710</locationX>
        <locationY>2264</locationY>
        <actionName>dupcheck__dc3QuickMergeFlowAction</actionName>
        <actionType>apex</actionType>
        <connector>
            <targetReference>Was_Lead_Merge_a_Success</targetReference>
        </connector>
        <faultConnector>
            <isGoTo>true</isGoTo>
            <targetReference>Populate_Custom_Error_with_Flow_Fault_Message</targetReference>
        </faultConnector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>recordIds</name>
            <value>
                <elementReference>DuplicateLeadIdCollection</elementReference>
            </value>
        </inputParameters>
        <nameSegment>dupcheck__dc3QuickMergeFlowAction</nameSegment>
        <offset>0</offset>
        <outputParameters>
            <assignToReference>LeadId</assignToReference>
            <name>masterRecordId</name>
        </outputParameters>
        <outputParameters>
            <assignToReference>isMergeSuccess</assignToReference>
            <name>mergeSucceeded</name>
        </outputParameters>
    </actionCalls>
    <actionCalls>
        <name>PersonAccount_Duplicate_Check</name>
        <label>PersonAccount Duplicate Check</label>
        <locationX>2129</locationX>
        <locationY>134</locationY>
        <actionName>dupcheck__dc3SearchByValuesFlowAction</actionName>
        <actionType>apex</actionType>
        <connector>
            <targetReference>Populate_Duplicate_Check_Variables</targetReference>
        </connector>
        <dataTypeMappings>
            <typeName>T__searchObject</typeName>
            <typeValue>Account</typeValue>
        </dataTypeMappings>
        <faultConnector>
            <targetReference>Populate_Custom_Error_with_Flow_Fault_Message</targetReference>
        </faultConnector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>crossObject</name>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>searchObject</name>
            <value>
                <elementReference>inputPersonAccount</elementReference>
            </value>
        </inputParameters>
        <nameSegment>dupcheck__dc3SearchByValuesFlowAction</nameSegment>
        <offset>0</offset>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </actionCalls>
    <apiVersion>62.0</apiVersion>
    <areMetricsLoggedToDataCloud>false</areMetricsLoggedToDataCloud>
    <assignments>
        <name>Assign_Account_IDs_to_Variables</name>
        <label>Assign Account IDs to Variables</label>
        <locationX>1634</locationX>
        <locationY>890</locationY>
        <assignmentItems>
            <assignToReference>OwnerId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_Account.OwnerId</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>outputAccountId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_Account.Id</elementReference>
            </value>
        </assignmentItems>
    </assignments>
    <assignments>
        <name>Assign_Lead_IDs_to_Variable</name>
        <label>Assign Lead IDs to Variable</label>
        <locationX>2162</locationX>
        <locationY>890</locationY>
        <assignmentItems>
            <assignToReference>outputLeadId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_Lead.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>OwnerId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_Lead.OwnerId</elementReference>
            </value>
        </assignmentItems>
    </assignments>
    <assignments>
        <name>Assign_Main_Duplicate_Account_ID_to_Account_ID_Variable</name>
        <label>Assign Main Duplicate Account ID to Account ID Variable</label>
        <locationX>1634</locationX>
        <locationY>674</locationY>
        <assignmentItems>
            <assignToReference>PersonAccountId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>outputMainDuplicateRecordId</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Get_Account</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Main_Duplicate_Lead_ID_to_Lead_ID_Variable</name>
        <label>Assign Main Duplicate Lead ID to Lead ID Variable</label>
        <locationX>2162</locationX>
        <locationY>674</locationY>
        <assignmentItems>
            <assignToReference>LeadId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>outputMainDuplicateRecordId</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Get_Lead</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Increment_Looped_Duplicate_Counter_in_Account_Loop</name>
        <label>Increment Looped Duplicate Counter in Account Loop</label>
        <locationX>534</locationX>
        <locationY>890</locationY>
        <assignmentItems>
            <assignToReference>NumLoopedDuplicates</assignToReference>
            <operator>Add</operator>
            <value>
                <numberValue>1.0</numberValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>PersonAccountCollection</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>Get_Account_Multiple_Duplicate_Path</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>isConvertedDuplicateFound</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>NumConvertedDuplicates</assignToReference>
            <operator>Add</operator>
            <value>
                <numberValue>1.0</numberValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>DuplicaPersonAccountId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Loop_PersonAccount_IDs</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>DuplicatePersonAccountIds</assignToReference>
            <operator>Add</operator>
            <value>
                <stringValue>{!Loop_PersonAccount_IDs};</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Loop_PersonAccount_IDs</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Increment_Looped_Duplicate_Counter_in_Lead_Loop</name>
        <label>Increment Looped Duplicate Counter in Lead Loop</label>
        <locationX>666</locationX>
        <locationY>1514</locationY>
        <assignmentItems>
            <assignToReference>NumLoopedDuplicates</assignToReference>
            <operator>Add</operator>
            <value>
                <numberValue>1.0</numberValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>LeadCollection</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>Get_Lead_Multiple_Duplicate_Path</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>DuplicateLeadIdCollection</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>Loop_Lead_ID_s</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Loop_Lead_ID_s</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Populate_Custom_Error_with_Cannot_Find_All_Duplicates</name>
        <label>Populate Custom Error with Cannot Find All Duplicates</label>
        <locationX>666</locationX>
        <locationY>1814</locationY>
        <assignmentItems>
            <assignToReference>CustomError</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>{!outputTotalDuplicates} were identified. Only {!NumLoopedDuplicates} were found.</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <isGoTo>true</isGoTo>
            <targetReference>Send_Error_Email_from_Input_Values</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Populate_Custom_Error_with_Flow_Fault_Message</name>
        <label>Populate Custom Error with Flow Fault Message</label>
        <locationX>3218</locationX>
        <locationY>242</locationY>
        <assignmentItems>
            <assignToReference>CustomError</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Flow.FaultMessage</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Send_Error_Email_from_Input_Values</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Populate_Custom_Error_with_Invalid_Duplicate_Record_Prefix</name>
        <label>Populate Custom Error with Invalid Duplicate Record Prefix</label>
        <locationX>2690</locationX>
        <locationY>674</locationY>
        <assignmentItems>
            <assignToReference>CustomError</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Cannot Identify Type of Record from Duplicate ID &quot;{!outputMainDuplicateRecordId}&quot;</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <isGoTo>true</isGoTo>
            <targetReference>Send_Error_Email_from_Input_Values</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Populate_Custom_Error_with_Lead_Merge_Failed</name>
        <label>Populate Custom Error with Lead Merge Failed</label>
        <locationX>842</locationX>
        <locationY>2480</locationY>
        <assignmentItems>
            <assignToReference>CustomError</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Lead Merge Failed</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <isGoTo>true</isGoTo>
            <targetReference>Send_Error_Email_from_Input_Values</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Populate_Duplicate_Check_Variables</name>
        <label>Populate Duplicate Check Variables</label>
        <locationX>2129</locationX>
        <locationY>242</locationY>
        <assignmentItems>
            <assignToReference>outputIsDuplicate</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>PersonAccount_Duplicate_Check.duplicate</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>outputMatchingScore</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>PersonAccount_Duplicate_Check.matchingScore</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>outputTotalDuplicates</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>PersonAccount_Duplicate_Check.totalDuplicates</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>outputMainDuplicateRecordId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>PersonAccount_Duplicate_Check.recordId</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Were_Duplicates_Found</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_Account_ID_From_Multi_Dupe_in_Account_ID_Variable</name>
        <label>Set Account ID From Multi-Dupe in Account ID Variable</label>
        <locationX>314</locationX>
        <locationY>2372</locationY>
        <assignmentItems>
            <assignToReference>PersonAccountId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>DuplicaPersonAccountId</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <isGoTo>true</isGoTo>
            <targetReference>Get_Account</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_IsDuplicate_to_False</name>
        <label>Set IsDuplicate to False</label>
        <locationX>2954</locationX>
        <locationY>458</locationY>
        <assignmentItems>
            <assignToReference>outputIsDuplicate</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </assignmentItems>
    </assignments>
    <assignments>
        <name>Set_Lead_Merge_Values_in_Record_Trail</name>
        <label>Set Lead Merge Values in Record Trail</label>
        <locationX>578</locationX>
        <locationY>2480</locationY>
        <assignmentItems>
            <assignToReference>RecordTrailRecordId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>LeadId</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>ChangeType</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Merge</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <isGoTo>true</isGoTo>
            <targetReference>Get_Lead</targetReference>
        </connector>
    </assignments>
    <decisions>
        <name>Did_We_Find_All_Duplicates</name>
        <label>Did We Find All Duplicates?</label>
        <locationX>578</locationX>
        <locationY>1706</locationY>
        <defaultConnector>
            <targetReference>Populate_Custom_Error_with_Cannot_Find_All_Duplicates</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>All_Duplicates_Were_Found</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>NumLoopedDuplicates</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>outputTotalDuplicates</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Were_Any_Converted_Duplicates_Found</targetReference>
            </connector>
            <label>All Duplicates Were Found</label>
        </rules>
    </decisions>
    <decisions>
        <name>Did_We_Find_More_Than_1_Converted_Duplicate</name>
        <label>Did We Find More Than 1 Converted Duplicate?</label>
        <locationX>182</locationX>
        <locationY>2264</locationY>
        <defaultConnector>
            <targetReference>Set_Account_ID_From_Multi_Dupe_in_Account_ID_Variable</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Single Converted Duplicate Exists</defaultConnectorLabel>
        <rules>
            <name>More_Than_1_Converted_Duplicate_Exists</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>NumConvertedDuplicates</leftValueReference>
                <operator>GreaterThanOrEqualTo</operator>
                <rightValue>
                    <numberValue>2.0</numberValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Email_IT_About_Multiple_Duplicate_Accounts_on_Lead_Import</targetReference>
            </connector>
            <label>More Than 1 Converted Duplicate Exists</label>
        </rules>
    </decisions>
    <decisions>
        <name>Did_We_Get_All_Duplicates_From_Account_Check</name>
        <label>Did We Get All Duplicates From Account Check?</label>
        <locationX>446</locationX>
        <locationY>1082</locationY>
        <defaultConnector>
            <targetReference>Get_Lead_Duplicate_ID_s</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Some Duplicates Remaining</defaultConnectorLabel>
        <rules>
            <name>Account_Check_Got_All</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>NumLoopedDuplicates</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>outputTotalDuplicates</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Were_Any_Converted_Duplicates_Found</targetReference>
            </connector>
            <label>Account Check Got All</label>
        </rules>
    </decisions>
    <decisions>
        <name>Was_Lead_Merge_a_Success</name>
        <label>Was Lead Merge a Success?</label>
        <locationX>710</locationX>
        <locationY>2372</locationY>
        <defaultConnector>
            <targetReference>Populate_Custom_Error_with_Lead_Merge_Failed</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Merge Failed</defaultConnectorLabel>
        <rules>
            <name>Merge_Successful</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>isMergeSuccess</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Set_Lead_Merge_Values_in_Record_Trail</targetReference>
            </connector>
            <label>Merge Successful</label>
        </rules>
    </decisions>
    <decisions>
        <name>Was_More_Than_1_Duplicate_Found</name>
        <label>Was More Than 1 Duplicate Found?</label>
        <locationX>1304</locationX>
        <locationY>458</locationY>
        <defaultConnector>
            <targetReference>Which_Type_of_Duplicate_Was_Found</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Single Duplicate Found</defaultConnectorLabel>
        <rules>
            <name>Multiple_Duplicates_Found</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>outputTotalDuplicates</leftValueReference>
                <operator>GreaterThanOrEqualTo</operator>
                <rightValue>
                    <numberValue>2.0</numberValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_PersonAccount_Duplicate_ID_s</targetReference>
            </connector>
            <label>Multiple Duplicates Found</label>
        </rules>
    </decisions>
    <decisions>
        <name>Were_Any_Converted_Duplicates_Found</name>
        <label>Were Any Converted Duplicates Found?</label>
        <locationX>446</locationX>
        <locationY>2156</locationY>
        <defaultConnector>
            <targetReference>Merge_Leads</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Converted_Duplicates_Exist</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>isConvertedDuplicateFound</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Did_We_Find_More_Than_1_Converted_Duplicate</targetReference>
            </connector>
            <label>Converted Duplicates Exist</label>
        </rules>
    </decisions>
    <decisions>
        <name>Were_Duplicates_Found</name>
        <label>Were Duplicates Found?</label>
        <locationX>2129</locationX>
        <locationY>350</locationY>
        <defaultConnector>
            <targetReference>Set_IsDuplicate_to_False</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No Duplicates</defaultConnectorLabel>
        <rules>
            <name>Duplicates_Exist</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>outputIsDuplicate</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Was_More_Than_1_Duplicate_Found</targetReference>
            </connector>
            <label>Duplicates Exist</label>
        </rules>
    </decisions>
    <decisions>
        <name>Which_Type_of_Duplicate_Was_Found</name>
        <label>Which Type of Duplicate Was Found?</label>
        <locationX>2162</locationX>
        <locationY>566</locationY>
        <defaultConnector>
            <targetReference>Populate_Custom_Error_with_Invalid_Duplicate_Record_Prefix</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Duplicate_Account</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>outputMainDuplicateRecordId</leftValueReference>
                <operator>StartsWith</operator>
                <rightValue>
                    <stringValue>001</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_Main_Duplicate_Account_ID_to_Account_ID_Variable</targetReference>
            </connector>
            <label>Duplicate Account</label>
        </rules>
        <rules>
            <name>Duplicate_Lead</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>outputMainDuplicateRecordId</leftValueReference>
                <operator>StartsWith</operator>
                <rightValue>
                    <stringValue>00Q</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_Main_Duplicate_Lead_ID_to_Lead_ID_Variable</targetReference>
            </connector>
            <label>Duplicate Lead</label>
        </rules>
    </decisions>
    <environments>Default</environments>
    <interviewLabel>AL - Parse Duplicate Result {!$Flow.CurrentDateTime}</interviewLabel>
    <label>AL - Parse Duplicate Result</label>
    <loops>
        <name>Loop_Lead_ID_s</name>
        <label>Loop Lead ID&apos;s</label>
        <locationX>578</locationX>
        <locationY>1298</locationY>
        <collectionReference>Get_Lead_Duplicate_ID_s.duplicateRecordIds</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Get_Lead_Multiple_Duplicate_Path</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Did_We_Find_All_Duplicates</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <name>Loop_PersonAccount_IDs</name>
        <label>Loop PersonAccount IDs</label>
        <locationX>446</locationX>
        <locationY>674</locationY>
        <collectionReference>Get_PersonAccount_Duplicate_ID_s.duplicateRecordIds</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Get_Account_Multiple_Duplicate_Path</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Did_We_Get_All_Duplicates_From_Account_Check</targetReference>
        </noMoreValuesConnector>
    </loops>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>AUTO_LAYOUT_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>AutoLaunchedFlow</processType>
    <recordLookups>
        <name>Get_Account</name>
        <label>Get Account</label>
        <locationX>1634</locationX>
        <locationY>782</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Assign_Account_IDs_to_Variables</targetReference>
        </connector>
        <faultConnector>
            <isGoTo>true</isGoTo>
            <targetReference>Populate_Custom_Error_with_Flow_Fault_Message</targetReference>
        </faultConnector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>PersonAccountId</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Account</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Account_Multiple_Duplicate_Path</name>
        <label>Get Account (Multiple Duplicate Path)</label>
        <locationX>534</locationX>
        <locationY>782</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Increment_Looped_Duplicate_Counter_in_Account_Loop</targetReference>
        </connector>
        <faultConnector>
            <isGoTo>true</isGoTo>
            <targetReference>Populate_Custom_Error_with_Flow_Fault_Message</targetReference>
        </faultConnector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Loop_PersonAccount_IDs</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Account</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Lead</name>
        <label>Get Lead</label>
        <locationX>2162</locationX>
        <locationY>782</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Assign_Lead_IDs_to_Variable</targetReference>
        </connector>
        <faultConnector>
            <isGoTo>true</isGoTo>
            <targetReference>Populate_Custom_Error_with_Flow_Fault_Message</targetReference>
        </faultConnector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>LeadId</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Lead</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Lead_Multiple_Duplicate_Path</name>
        <label>Get Lead (Multiple Duplicate Path)</label>
        <locationX>666</locationX>
        <locationY>1406</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Increment_Looped_Duplicate_Counter_in_Lead_Loop</targetReference>
        </connector>
        <faultConnector>
            <isGoTo>true</isGoTo>
            <targetReference>Populate_Custom_Error_with_Flow_Fault_Message</targetReference>
        </faultConnector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Loop_Lead_ID_s</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Lead</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <start>
        <locationX>2003</locationX>
        <locationY>0</locationY>
        <connector>
            <targetReference>PersonAccount_Duplicate_Check</targetReference>
        </connector>
    </start>
    <status>Draft</status>
    <subflows>
        <name>Send_Error_Email_from_Input_Values</name>
        <label>Send Error Email from Input Values</label>
        <locationX>3218</locationX>
        <locationY>350</locationY>
        <flowName>AL_Send_Error_Email_from_Input_Values</flowName>
        <inputAssignments>
            <name>inputCustomError</name>
            <value>
                <elementReference>CustomError</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>inputFlowName</name>
            <value>
                <stringValue>AL - Parse Duplicate Result</stringValue>
            </value>
        </inputAssignments>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </subflows>
    <textTemplates>
        <name>rtEmailMultipleDuplicateAccounts</name>
        <isViewedAsPlainText>false</isViewedAsPlainText>
        <text>&lt;p&gt;&lt;strong&gt;Issue:&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;Multiple Duplicate Accounts Identified&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;IDs of Identified Duplicates&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;{!DuplicatePersonAccountIds}&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;Customer Details: &lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;Name:&lt;/strong&gt; {!inputPersonAccount.FirstName} {!inputPersonAccount.LastName}&lt;/p&gt;&lt;p&gt;&lt;strong&gt;Email:&lt;/strong&gt; {!inputPersonAccount.PersonEmail}&lt;/p&gt;&lt;p&gt;&lt;strong&gt;Phone:&lt;/strong&gt; {!inputPersonAccount.Phone}&lt;/p&gt;</text>
    </textTemplates>
    <variables>
        <name>ChangeType</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>CustomError</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>DuplicaPersonAccountId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>DuplicateLeadIdCollection</name>
        <dataType>String</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>DuplicatePersonAccountIds</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>inputPersonAccount</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
        <objectType>Account</objectType>
    </variables>
    <variables>
        <name>isConvertedDuplicateFound</name>
        <dataType>Boolean</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <booleanValue>false</booleanValue>
        </value>
    </variables>
    <variables>
        <name>isMergeSuccess</name>
        <dataType>Boolean</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <booleanValue>false</booleanValue>
        </value>
    </variables>
    <variables>
        <name>LeadCollection</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Lead</objectType>
    </variables>
    <variables>
        <name>LeadId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>NumConvertedDuplicates</name>
        <dataType>Number</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <scale>0</scale>
        <value>
            <numberValue>0.0</numberValue>
        </value>
    </variables>
    <variables>
        <name>NumLoopedDuplicates</name>
        <dataType>Number</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <scale>0</scale>
        <value>
            <numberValue>0.0</numberValue>
        </value>
    </variables>
    <variables>
        <name>outputAccountId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>outputIsDuplicate</name>
        <dataType>Boolean</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>outputLeadId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>outputMainDuplicateRecordId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>outputMatchingScore</name>
        <dataType>Number</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>true</isOutput>
        <scale>0</scale>
        <value>
            <numberValue>0.0</numberValue>
        </value>
    </variables>
    <variables>
        <name>outputTotalDuplicates</name>
        <dataType>Number</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>true</isOutput>
        <scale>0</scale>
        <value>
            <numberValue>0.0</numberValue>
        </value>
    </variables>
    <variables>
        <name>OwnerId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>PersonAccountCollection</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Account</objectType>
    </variables>
    <variables>
        <name>PersonAccountId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>RecordTrailRecordId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
</Flow>
