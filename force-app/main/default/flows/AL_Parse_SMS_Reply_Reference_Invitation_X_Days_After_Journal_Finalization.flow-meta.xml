<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <apiVersion>62.0</apiVersion>
    <assignments>
        <name>Populate_Custom_Error_with_Missing_Keyword_Input</name>
        <label>Populate Custom Error with Missing Keyword Input</label>
        <locationX>510</locationX>
        <locationY>350</locationY>
        <assignmentItems>
            <assignToReference>CustomError</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>ptMissingKeywordError</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Set_IsSuccess_to_False</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Populate_Invalid_Values</name>
        <label>Populate Invalid Values</label>
        <locationX>578</locationX>
        <locationY>950</locationY>
        <assignmentItems>
            <assignToReference>outputSurveyResult</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Error</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>outputDanishSms</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>ptDanishInvalidResponseMessage</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>outputSwedishSms</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>ptSwedishInvalidResponseMessage</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>outputIsResponseValid</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>outputIrishSms</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>ptIrishInvalidResponseMessage</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>outputCreateFollowupConversation</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Set_IsSuccess_to_True</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Populate_Unsatisfied_Values</name>
        <label>Populate Unsatisfied Values</label>
        <locationX>314</locationX>
        <locationY>950</locationY>
        <assignmentItems>
            <assignToReference>outputSurveyResult</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Unsatisfied</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>outputDanishSms</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>ptDanishNoReferralMessage</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>outputSwedishSms</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>ptSwedishNoReferralMessage</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>outputIsResponseValid</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>outputIrishSms</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>ptIrishNoReferralMessage</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>outputCreateFollowupConversation</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Set_IsSuccess_to_True</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Populate_WantsToRefer_Values</name>
        <label>Populate WantsToRefer Values</label>
        <locationX>50</locationX>
        <locationY>950</locationY>
        <assignmentItems>
            <assignToReference>outputSurveyResult</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Wants to Refer</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>outputSwedishSms</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>ptSwedishWantsToReferMessage</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>outputDanishSms</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>ptDanishWantsToReferMessage</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>outputIsResponseValid</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>outputIrishSms</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>ptIrishWantsToReferMessage</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>outputCreateFollowupConversation</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>outputFollowupExpectsKeyword</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>outputFollowupKeywordString</assignToReference>
            <operator>Assign</operator>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>outputFollowupConversationType</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Reference Information</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>outputDanishCallCampaignName</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Denmark: Post-Sale Reference</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>outputSwedishCallCampaignName</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Sweden: Post-Sale Reference</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>outputIrishCallCampaignName</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Ireland: Post-Sale Reference</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Set_IsSuccess_to_True</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_IsNotReferirng_to_True</name>
        <label>Set IsNotReferirng to True</label>
        <locationX>558</locationX>
        <locationY>458</locationY>
        <assignmentItems>
            <assignToReference>IsNotReferirng</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Loop_Keywords</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_IsSuccess_to_False</name>
        <label>Set IsSuccess to False</label>
        <locationX>510</locationX>
        <locationY>458</locationY>
        <assignmentItems>
            <assignToReference>IsSuccess</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </assignmentItems>
    </assignments>
    <assignments>
        <name>Set_IsSuccess_to_True</name>
        <label>Set IsSuccess to True</label>
        <locationX>314</locationX>
        <locationY>1142</locationY>
        <assignmentItems>
            <assignToReference>IsSuccess</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
    </assignments>
    <assignments>
        <name>Set_IsWantingToRefer_to_True</name>
        <label>Set IsWantingToRefer to True</label>
        <locationX>294</locationX>
        <locationY>458</locationY>
        <assignmentItems>
            <assignToReference>IsWantingToRefer</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Loop_Keywords</targetReference>
        </connector>
    </assignments>
    <decisions>
        <name>Do_We_Have_an_Input_SMS_Body</name>
        <label>Do We Have an Input SMS Body?</label>
        <locationX>422</locationX>
        <locationY>242</locationY>
        <defaultConnector>
            <targetReference>Populate_Custom_Error_with_Missing_Keyword_Input</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Got_Input_SMS_Body</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>inputReceivedSmsBody</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>What_was_the_result</targetReference>
            </connector>
            <label>Got Input SMS Body</label>
        </rules>
    </decisions>
    <decisions>
        <name>Do_We_Have_any_Keywords</name>
        <label>Do We Have any Keywords?</label>
        <locationX>314</locationX>
        <locationY>134</locationY>
        <defaultConnector>
            <targetReference>Do_We_Have_an_Input_SMS_Body</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Got_Keywords</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>inputMatchedKeywordCollection</leftValueReference>
                <operator>IsEmpty</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Loop_Keywords</targetReference>
            </connector>
            <label>Got Keywords</label>
        </rules>
    </decisions>
    <decisions>
        <name>What_is_the_matched_keyword</name>
        <label>What is the matched keyword?</label>
        <locationX>558</locationX>
        <locationY>350</locationY>
        <defaultConnector>
            <targetReference>Loop_Keywords</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Keyword_is_ja</name>
            <conditionLogic>or</conditionLogic>
            <conditions>
                <leftValueReference>Loop_Keywords</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>ja</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Loop_Keywords</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>yes</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Set_IsWantingToRefer_to_True</targetReference>
            </connector>
            <label>Keyword is &quot;ja&quot;</label>
        </rules>
        <rules>
            <name>Keyword_is_nej</name>
            <conditionLogic>or</conditionLogic>
            <conditions>
                <leftValueReference>Loop_Keywords</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>nej</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Loop_Keywords</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>no</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Set_IsNotReferirng_to_True</targetReference>
            </connector>
            <label>Keyword is &quot;nej&quot;</label>
        </rules>
    </decisions>
    <decisions>
        <name>What_was_the_result</name>
        <label>What was the result?</label>
        <locationX>314</locationX>
        <locationY>842</locationY>
        <defaultConnector>
            <targetReference>Populate_Invalid_Values</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Invalid Response</defaultConnectorLabel>
        <rules>
            <name>Wants_to_refer</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>IsWantingToRefer</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>IsNotReferirng</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Populate_WantsToRefer_Values</targetReference>
            </connector>
            <label>Wants to refer</label>
        </rules>
        <rules>
            <name>No_Referral</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>IsNotReferirng</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>IsWantingToRefer</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Populate_Unsatisfied_Values</targetReference>
            </connector>
            <label>No Referral</label>
        </rules>
    </decisions>
    <environments>Default</environments>
    <interviewLabel>AL - Parse SMS Reply: Reference Invitation X Days After Journal Finalization {!$Flow.CurrentDateTime}</interviewLabel>
    <label>AL - Parse SMS Reply: Reference Invitation X Days After Journal Finalization</label>
    <loops>
        <name>Loop_Keywords</name>
        <label>Loop Keywords</label>
        <locationX>206</locationX>
        <locationY>242</locationY>
        <collectionReference>inputMatchedKeywordCollection</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>What_is_the_matched_keyword</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>What_was_the_result</targetReference>
        </noMoreValuesConnector>
    </loops>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>AUTO_LAYOUT_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>AutoLaunchedFlow</processType>
    <start>
        <locationX>188</locationX>
        <locationY>0</locationY>
        <connector>
            <targetReference>Do_We_Have_any_Keywords</targetReference>
        </connector>
    </start>
    <status>Active</status>
    <textTemplates>
        <name>ptDanishInvalidResponseMessage</name>
        <isViewedAsPlainText>true</isViewedAsPlainText>
        <text>Tak for dit svar üôè

Vores system forst√•r kun JA eller NEJ.

Svar venligst p√• denne SMS med:
JA ‚Äì hvis du vil henvise
NEJ ‚Äì hvis du ikke √∏nsker det.

Med venlig hilsen
Din Familiejurist</text>
    </textTemplates>
    <textTemplates>
        <name>ptDanishNoReferralMessage</name>
        <isViewedAsPlainText>true</isViewedAsPlainText>
        <text>Tak for dit svar ‚Äì helt i orden üòä

Kommer du senere i tanke om nogen, er du altid velkommen til at skrive til os.
Ha‚Äô en god dag!

Med venlig hilsen
Din Familiejurist</text>
    </textTemplates>
    <textTemplates>
        <name>ptDanishWantsToReferMessage</name>
        <isViewedAsPlainText>true</isViewedAsPlainText>
        <text>Hvor dejligt, at du vil henvise os! üôè

Svar blot med navn og tlf. p√• personen.

Vi kontakter dem venligt ‚Äì men tjek gerne f√∏rst, at de er ok med det.

Tak for hj√¶lpen og god dag!

Med venlig hilsen
Din Familiejurist</text>
    </textTemplates>
    <textTemplates>
        <name>ptIrishInvalidResponseMessage</name>
        <isViewedAsPlainText>true</isViewedAsPlainText>
        <text>Thanks for your reply üôè

Our system only recognises YES or NO.

Please reply to this message with:
YES ‚Äì if you‚Äôd like to refer someone
NO ‚Äì if you‚Äôd prefer not to.

Kind regards
Heres Law</text>
    </textTemplates>
    <textTemplates>
        <name>ptIrishNoReferralMessage</name>
        <isViewedAsPlainText>true</isViewedAsPlainText>
        <text>Thanks for your reply ‚Äì that‚Äôs absolutely fine üòä

If someone comes to mind later, feel free to text us anytime.

Have a great day!

Kind regards
Heres Law</text>
    </textTemplates>
    <textTemplates>
        <name>ptIrishWantsToReferMessage</name>
        <isViewedAsPlainText>true</isViewedAsPlainText>
        <text>That‚Äôs wonderful ‚Äì thank you for referring us! üôè

Just reply with the person‚Äôs name and phone number.

We‚Äôll contact them politely ‚Äì please check they‚Äôre happy for us to call first.

Thanks again and have a lovely day!

Kind regards
Heres Law</text>
    </textTemplates>
    <textTemplates>
        <name>ptMissingKeywordError</name>
        <isViewedAsPlainText>true</isViewedAsPlainText>
        <text>Missing Keyword Input:
{!inputMatchedKeywordCollection}</text>
    </textTemplates>
    <textTemplates>
        <name>ptSwedishInvalidResponseMessage</name>
        <isViewedAsPlainText>true</isViewedAsPlainText>
        <text>Tack f√∂r ditt svar üôè

V√•rt system f√∂rst√•r bara JA eller NEJ.

Svara d√§rf√∂r p√• detta SMS med:
JA ‚Äì om du vill h√§nvisa n√•gon
NEJ ‚Äì om du inte vill.

V√§nliga h√§lsningar,
Din Familjejurist</text>
    </textTemplates>
    <textTemplates>
        <name>ptSwedishNoReferralMessage</name>
        <isViewedAsPlainText>true</isViewedAsPlainText>
        <text>Tack f√∂r ditt svar ‚Äì helt i sin ordning üòä

Om du senare kommer att t√§nka p√• n√•gon, f√•r du g√§rna skriva till oss.

Ha en bra dag!

V√§nliga h√§lsningar,
Din Familjejurist</text>
    </textTemplates>
    <textTemplates>
        <name>ptSwedishWantsToReferMessage</name>
        <isViewedAsPlainText>true</isViewedAsPlainText>
        <text>Vad roligt att du vill h√§nvisa oss vidare! üôè

Svara bara med namn och telefonnummer till personen.

Vi kontaktar dem p√• ett trevligt och respektfullt s√§tt ‚Äì men kolla g√§rna att de samtycker f√∂rst.

Tack f√∂r hj√§lpen och ha en fin dag!

Med v√§nliga h√§lsningar
Din Familjejurist</text>
    </textTemplates>
    <variables>
        <name>CustomError</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>inputEmail</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>inputFirstName</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>inputLastName</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>inputMatchedKeywordCollection</name>
        <dataType>String</dataType>
        <isCollection>true</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>inputReceivedSmsBody</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>IsNotReferirng</name>
        <dataType>Boolean</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <booleanValue>false</booleanValue>
        </value>
    </variables>
    <variables>
        <name>IsSuccess</name>
        <dataType>Boolean</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>true</isOutput>
        <value>
            <booleanValue>false</booleanValue>
        </value>
    </variables>
    <variables>
        <name>IsWantingToRefer</name>
        <dataType>Boolean</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <booleanValue>false</booleanValue>
        </value>
    </variables>
    <variables>
        <name>outputCreateFollowupConversation</name>
        <dataType>Boolean</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>true</isOutput>
        <value>
            <booleanValue>false</booleanValue>
        </value>
    </variables>
    <variables>
        <name>outputDanishCallCampaignName</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>outputDanishSms</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>outputFollowupConversationType</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>outputFollowupExpectsKeyword</name>
        <dataType>Boolean</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>true</isOutput>
        <value>
            <booleanValue>false</booleanValue>
        </value>
    </variables>
    <variables>
        <name>outputFollowupKeywordString</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>outputIrishCallCampaignName</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>outputIrishSms</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>outputIsResponseValid</name>
        <dataType>Boolean</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>true</isOutput>
        <value>
            <booleanValue>false</booleanValue>
        </value>
    </variables>
    <variables>
        <name>outputSurveyResult</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>outputSwedishCallCampaignName</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>outputSwedishSms</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>true</isOutput>
    </variables>
</Flow>
